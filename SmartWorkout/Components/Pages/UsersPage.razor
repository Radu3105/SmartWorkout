@page "/users"
@using Blazorise.DataGrid
@using Microsoft.AspNetCore.Authorization
@using SmartWorkout.Entities
@rendermode InteractiveServer

@* @attribute [Authorize(Roles="Administrator")] *@

<div class="nav-item px-3">
    <NavLink class="nav-link" href="user/add">
        <Button Color="Color.Success">+ Add User</Button>
    </NavLink>
</div>
<DataGrid   
    TItem="User"
    Data="@_users"
    Filterable
    FilterMethod="DataGridFilterMethod.StartsWith"
    Responsive
    Editable
    ShowPager
    PagerPosition="DataGridPagerPosition.Bottom"
    PageSize="10"
>
    <DataGridColumn TItem="User" Field="FirstName" Caption="First Name"></DataGridColumn>
    <DataGridColumn TItem="User" Field="LastName" Caption="Last Name"></DataGridColumn>
    <DataGridColumn TItem="User" Field="Birthday" Caption="Birthday" DisplayFormat="{0:MM/dd/yyyy}"></DataGridColumn>
    <DataGridColumn TItem="User" Field="Gender" Caption="Gender"></DataGridColumn>
    <DataGridCommandColumn TItem="User" ClearFilterCommandAllowed="false" NewCommandAllowed="false">
        <EditCommandTemplate>
            <Button Color="Color.Warning" Clicked="() => OnSeeWorkoutsBtnClicked(context)">See Workouts</Button>
            <Button Color="Color.Success" Clicked="() => OnAddWorkoutBtnClicked(context)">+ Add Workout</Button>
            <Button Color="Color.Primary" Clicked="() => OnEditBtnClicked(context)">Edit</Button>
        </EditCommandTemplate>
        <DeleteCommandTemplate>
            <Button Color="Color.Danger" Clicked="() => OnDeleteBtnClicked(context)">Delete</Button>
        </DeleteCommandTemplate>
    </DataGridCommandColumn>
</DataGrid>
